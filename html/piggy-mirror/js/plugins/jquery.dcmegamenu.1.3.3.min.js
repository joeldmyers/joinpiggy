/*
 * DC Mega Menu - jQuery mega menu
 * Copyright (c) 2011 Design Chemical
 *
 * Dual licensed under the MIT and GPL licenses:
 * 	http://www.opensource.org/licenses/mit-license.php
 * 	http://www.gnu.org/licenses/gpl.html
 *
 */
!function(e){e.fn.dcMegaMenu=function(s){var a={classParent:"dc-mega",classContainer:"sub-container",classSubParent:"mega-hdr",classSubLink:"mega-hdr",classWidget:"dc-extra",rowItems:3,speed:"fast",effect:"fade",event:"hover",fullWidth:!1,onLoad:function(){},beforeOpen:function(){},beforeClose:function(){}},s=e.extend(a,s),t=this
return t.each(function(s){function i(){var s=e(".sub",this)
e(this).addClass("mega-hover"),"fade"==a.effect&&e(s).fadeIn(a.speed),"slide"==a.effect&&e(s).show(a.speed),a.beforeOpen.call(this)}function n(s){var t=e(".sub",s)
e(s).addClass("mega-hover"),"fade"==a.effect&&e(t).fadeIn(a.speed),"slide"==a.effect&&e(t).show(a.speed),a.beforeOpen.call(this)}function h(){var s=e(".sub",this)
e(this).removeClass("mega-hover"),e(s).hide(),a.beforeClose.call(this)}function l(s){var t=e(".sub",s)
e(s).removeClass("mega-hover"),e(t).hide(),a.beforeClose.call(this)}function r(){e("li",t).removeClass("mega-hover"),e(".sub",t).hide()}function o(){$arrow='<span class="dc-mega-icon"></span>'
var s=f+"-li",o=t.outerWidth()
e("> li",t).each(function(){var i=e("> ul",this),n=e("> a",this)
if(i.length){n.addClass(f).append($arrow),i.addClass("sub").wrap('<div class="'+u+'" />')
var h=e(this).position()
if(pl=h.left,e("ul",i).length){e(this).addClass(s),e("."+u,this).addClass("mega"),e("> li",i).each(function(){e(this).hasClass(v)||(e(this).addClass("mega-unit"),e("> ul",this).length?(e(this).addClass(d),e("> a",this).addClass(d+"-a")):(e(this).addClass(c),e("> a",this).addClass(c+"-a")))})
var l=e(".mega-unit",this)
rowSize=parseInt(a.rowItems)
for(var r=0;r<l.length;r+=rowSize)l.slice(r,r+rowSize).wrapAll('<div class="row" />')
i.show()
var g=e(this).width(),p=pl+g,m=o-p,C=i.outerWidth(),w=i.parent("."+u).outerWidth(),b=w-C
if(1==a.fullWidth){var x=o-b
i.parent("."+u).css({width:x+"px"}),t.addClass("full-width")}var W=e(".mega-unit",i).outerWidth(!0),I=e(".row:eq(0) .mega-unit",i).length,S=W*I,L=S+b
if(e(".row",this).each(function(){e(".mega-unit:last",this).addClass("last")
var s=void 0
e(".mega-unit > a",this).each(function(){var a=parseInt(e(this).height());(void 0===s||a>s)&&(s=a)}),e(".mega-unit > a",this).css("height",s+"px"),e(this).css("width",S+"px")}),1==a.fullWidth)P={left:0}
else{var k=k>m?k+k-m:(L-g)/2,z=pl-k,P={left:pl+"px",marginLeft:-k+"px"}
0>z?P={left:0}:k>m&&(P={right:0})}e("."+u,this).css(P),e(".row",i).each(function(){var s=e(this).height()
e(".mega-unit",this).css({height:s+"px"}),e(this).parent(".row").css({height:s+"px"})}),i.hide()}else e("."+u,this).addClass("non-mega").css("left",pl+"px")}})
var g=e("> li > a",t).outerHeight(!0)
if(e("."+u,t).css({top:g+"px"}).css("z-index","1000"),"hover"==a.event){var p={sensitivity:2,interval:100,over:i,timeout:400,out:h}
e("li",t).hoverIntent(p)}"click"==a.event&&(e("body").mouseup(function(s){e(s.target).parents(".mega-hover").length||r()}),e("> li > a."+f,t).click(function(s){var a=e(this).parent()
a.hasClass("mega-hover")?l(a):n(a),s.preventDefault()})),a.onLoad.call(this)}var d=a.classSubParent,c=a.classSubLink,f=a.classParent,u=a.classContainer,v=a.classWidget
o()})}}(jQuery)
